generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  schemas  = ["universidad"]
}

model Carrera {
  id          Int         @id @default(autoincrement())
  nombre      String
  duracion    Int
  ciclos      Ciclo[]
  estudiantes Estudiante[]
  docentes    Docente[]
  materias    Materia[]

  @@schema("universidad")
}

model Ciclo {
  id          Int          @id @default(autoincrement())
  numero      Int
  carrera     Carrera     @relation(fields: [carreraId], references: [id])
  carreraId   Int
  estudiantes Estudiante[]

  @@schema("universidad")
}

model Estudiante {
  id             Int             @id @default(autoincrement())
  nombre         String
  apellido       String
  correo         String          @unique
  activo         Boolean         @default(true)
  carrera        Carrera         @relation(fields: [carreraId], references: [id])
  carreraId      Int
  ciclo          Ciclo           @relation(fields: [cicloId], references: [id])
  cicloId        Int
  inscripciones  Inscripcion[]

  @@schema("universidad")
}

model Docente {
  id             Int        @id @default(autoincrement())
  nombre         String
  apellido       String
  especialidad   String
  activo         Boolean    @default(true)
  tiempoCompleto Boolean    @default(false)
  carrera        Carrera    @relation(fields: [carreraId], references: [id])
  carreraId      Int
  materias       Materia[]

  @@schema("universidad")
}

model Materia {
  id             Int            @id @default(autoincrement())
  nombre         String
  creditos       Int
  cupo           Int            @default(0)
  carrera        Carrera        @relation(fields: [carreraId], references: [id])
  carreraId      Int
  docente        Docente        @relation(fields: [docenteId], references: [id])
  docenteId      Int
  inscripciones  Inscripcion[]

  @@schema("universidad")
}

model Inscripcion {
  id             Int        @id @default(autoincrement())
  cicloAcademico String
  notaFinal      Float?
  estudiante     Estudiante @relation(fields: [estudianteId], references: [id])
  estudianteId   Int
  materia        Materia    @relation(fields: [materiaId], references: [id])
  materiaId      Int

  @@schema("universidad")
}
